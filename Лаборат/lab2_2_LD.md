| [<- до лаборних робіт](README.md) | [на основну сторінку курсу](../README.md) |
| --------------------------------- | ----------------------------------------- |
| [<- 1 частина ](lab2_LD.md)       |                                           |

# Лабораторна робота 2. Робота з LD (Ladder Diagram).

## 2. Приклад написання програми користувача.

П2. Вирішення задач з використанням мови LD. 

- [ ] Уточнення завдання
- [ ] Загальні концепції послідовності розробки
- [ ] Підбір апаратних засобів ПЛК
- [ ] Розробка першого варіанту методики випробувань.
- [ ] Виділення незалежних функцій та задач 
- [ ] Розробка алгоритму для функцій та задач
- [ ] Розробка програми користувача
- [ ] Уточнення та модифікація методики випробувань.

### Опис завдання.

###### 2.1. Перший варіант завдання.

Ознайомтеся з постановкою завдання для створення програми користувача. Схема технологічної установки, для якої необхідно розробити програму користувача показана на рис.2. 1

![](media2/dia1.png)

Після натискання кнопки "ПУСК", якщо ємність не порожня, повинен відкритися клапан `LVS3`, і присутня рідина повинна вивантажитися з ємності.  Якщо (коли) ємність буде порожня необхідно закрити клапан `LVS3` і відкрити клапан `LVS1` і почати її наповнювати до спрацювання середнього рівня. Після цього необхідно закрити клапан `LVS1` і відкрити `LVS2` для заповнення ємності до верхнього рівня. Потім клапан `LVS2` треба закрити і відкрити клапан `TV1` повністю. Після досягнення температури 50°С клапан треба залишити відкритим на 50%. Після досягнення значення 55°С клапан `TV1` треба закрити повністю і вивантажити рідину з апарату. Якщо не натиснута кнопка "СТОП" - цикл повинен повторюватися.

###### 2.2. Аналіз завдання.          

Наведене вище завдання є типовим початковим, яке дає можливість поверхово оцінити необхідний алгоритм та підібрати компоненти ПЛК. Але воно має ряд невизначеностей, які необхідно уточнити. Виділимо принаймні деякі з них. 

1. Що значить закрити або відкрити клапан, яке для клапанів є нормальним положенням? Якщо клапани нормально-закриті, то відкриття для ПЛК буде значити подачу логічної одиниці, у іншому випадку - навпаки, нуля. 
2. Як працюють сигналізатори рівня? Якщо ємність порожня, то сигналізатор нижнього рівня буде замкнутим або розімкнутим? 
3. У якому стані має знаходитися клапан гарячої води на кожному із кроків?
4. Як повинен вести себе  алгоритм в нештатних ситуаціях?

Тому перед розробкою алгоритму та вибору складових ПЛК роблять уточнення завдання. Для початку визначаються з засобами вводу/виводу, які підключаються до ПЛК для вирішення завдання. 

###### 2.3. Визначення необхідних датчиків та виконавчих механізмів.          

При аналізі завдання, ще перед підбором датчиків та ВМ визначаються з типом сигналів. Спробуйте самостійно, без перегляду таблиці 2.1, визначити скільки потрібно дискретних входів та виходів, аналогових входів та виходів. 

У таблиці 2.1

Таб.2.1. Типи сигналів

| ва параметру**                             | **Діапазон  зміни** | **Діапазон сигналу** |
| ------------------------------------------ | ------------------- | -------------------- |
| Рівень "a"                                 | вкл/откл            | Вкл.=24В, Викл=0     |
| Кнопка  «ПУСК»                             | вкл/откл            | Вкл.=24В, Викл=0     |
| Перемикач  вибору продукції: - продукт №1  | вкл/откл            | Вкл.=24В, Викл=0     |
| Перемикач вибору продукції:   - продукт №2 | вкл/откл            | Вкл.=24В, Викл=0     |
| Рівень                                     | 0-10 м              | 0-20 мА              |
| Температура                                | -50-150 °С          | 0-20 мА              |
| Мішалка                                    | вкл/откл            | Вкл.=24В, Викл=0В    |
| Клапани  Кл1-Кл3                           | Відкритий/закритий  | Відкр=24В, Закр=0В   |
| Клапан пари Кл5                            | 0-100%              | 4-20 мА              |

 

Передбачається підключення вимірювальних перетворювачів та виконавчих механізмів з наступними характеристиками сигналів.  

Таблиця 4.1.Перелік змінних та вимоги до них  

 

| **Назва параметру**                        | **Діапазон  зміни** | **Діапазон сигналу** |
| ------------------------------------------ | ------------------- | -------------------- |
| Рівень "a"                                 | вкл/откл            | Вкл.=24В, Викл=0     |
| Кнопка  «ПУСК»                             | вкл/откл            | Вкл.=24В, Викл=0     |
| Перемикач  вибору продукції: - продукт №1  | вкл/откл            | Вкл.=24В, Викл=0     |
| Перемикач вибору продукції:   - продукт №2 | вкл/откл            | Вкл.=24В, Викл=0     |
| Рівень                                     | 0-10 м              | 0-20 мА              |
| Температура                                | -50-150 °С          | 0-20 мА              |
| Мішалка                                    | вкл/откл            | Вкл.=24В, Викл=0В    |
| Клапани  Кл1-Кл3                           | Відкритий/закритий  | Відкр=24В, Закр=0В   |
| Клапан пари Кл5                            | 0-100%              | 4-20 мА              |

###### 2.2. Уточнений варіант завдання .       

Після натискання кнопки "ПУСК", якщо ємність не порожня (`LS1=ВКЛ`), повинен відкритися клапан `LVS3`, і присутня рідина повинна вивантажитися з ємності.  Якщо (коли) ємність буде порожня (`LS1=ВІДКЛ`) необхідно закрити клапан `LVS3` і відкрити клапан `LVS1` і почати її наповнювати до спрацювання рівня `LS2` (`LS2=ВКЛ`). Після цього необхідно закрити клапан `LVS1` і відкрити `LVS2` для заповнення ємності до верхнього рівня. Після цього клапан `LVS2` треба закрити і відкрити клапан `TV1` на 100%. Після досягнення температури 50°С клапан треба залишити відкритим на 50%. Після досягнення значення 55°С клапан `TV1` треба закрити повністю і вивантажити рідину з апарату. Якщо не натиснута кнопка "СТОП" - цикл повинен повторюватися.



## 3.Створення власної програми користувача.